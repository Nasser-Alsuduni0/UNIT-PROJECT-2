{% extends 'main/base.html' %}
{% block title %}{{ book.title }} - ReadWise{% endblock %}

{% block content %}
<div class="row mb-5">
  <div class="col-md-4">
    <img src="{{ book.cover.url }}" class="img-fluid rounded shadow" alt="{{ book.title }}">
  </div>
  <div class="col-md-8">
    <h2>{{ book.title }}</h2>
    <p class="text-muted"><strong>Author:</strong> {{ book.author }}</p>
    <p>
    <strong>Genres:</strong>
    {% for genre in book.genres.all %}
      <span class="badge bg-secondary me-1">{{ genre.name }}</span>
    {% empty %}
      <span class="text-muted">No genres</span>
    {% endfor %}
  </p>
    <p><strong>Published:</strong> {{ book.published_date }}</p>
    <p>{{ book.description }}</p>

    {% if user.is_authenticated %}
      <a href="#" class="btn btn-primary">Write a Review</a>
    {% else %}
      <p class="text-muted">Login to write a review.</p>
    {% endif %}
  </div>
</div>

<h4>üìù Reviews</h4>
<div class="row">
  {% for review in reviews %}
  <div class="col-md-6 mb-3">
    <div class="card">
      <div class="card-body">
        <p class="mb-1"><strong>{{ review.user.username }}</strong> rated it ‚≠ê {{ review.rating }}/5</p>
        <p class="mb-0">{{ review.comment }}</p>
        <small class="text-muted">{{ review.created_at|date:"M d, Y" }}</small>
      </div>
    </div>
  </div>
  {% empty %}
    <p>No reviews yet.</p>
  {% endfor %}
</div>
{% endblock %}
